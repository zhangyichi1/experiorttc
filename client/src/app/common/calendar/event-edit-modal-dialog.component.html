<div *ngIf="!editMode; else editEvents">
  <h1 mat-dialog-title>No event for today, let's add one</h1>
  <div mat-dialog-content>
    <form class="modal-container" #f="ngForm">
      <mat-form-field class="full-width">
        <input matInput placeholder="title" name="title" [(ngModel)]='title' required>
      </mat-form-field>
      <mat-form-field class="full-width">
        <textarea matInput placeholder="description" name="description" [(ngModel)]='description'></textarea>
      </mat-form-field>

      <br>

      <mat-form-field class="date">
        <input matInput [matDatepicker]="startpicker" placeholder="Choose a date from toggle" name="startingDate" [(ngModel)]="startingDate"
         [min]="minStartingDate" (dateInput)="checkingEndingDate()" required>
        <mat-datepicker-toggle matSuffix [for]="startpicker" (dateInput)="checkingEndingDate()"></mat-datepicker-toggle>
        <mat-datepicker #startpicker disabled="false" (dateInput)="checkingEndingDate()"></mat-datepicker>
      </mat-form-field>
      <mat-form-field class="date">
        <mat-select placeholder="starting hour" name="startingHour" [(ngModel)]="startingHour"
        (ngModelChange)="checkingEndingDate()" [disabled]="endingDateDisabled" required>
          <mat-option *ngFor="let hour of hourOptions" [value]="hour.value">
            {{ hour.viewValue }}
          </mat-option>
        </mat-select>
      </mat-form-field>
      <mat-form-field class="date">
        <mat-select placeholder="starting minute" name="startingMin" [(ngModel)]="startingMin"
        (ngModelChange)="checkingEndingDate()" [disabled]="endingDateDisabled" required>
          <mat-option *ngFor="let min of minOptions" [value]="min.value">
            {{ min.viewValue }}
          </mat-option>
        </mat-select>
      </mat-form-field>
      <!-- <mat-form-field>
        <input matInput [matTimepicker]="timePicker" placeholder="Choose a time" formControlName="startingTime">
        <mat-timepicker-toggle matSuffix [for]="timePicker"></mat-timepicker-toggle>
        <mat-timepicker #timePicker color="primary"></mat-timepicker>
      </mat-form-field> -->

      <mat-form-field class="date">
        <input matInput [matDatepicker]="endingPicker" placeholder="Choose a date from toggle" name="endingDate" [(ngModel)]="endingDate"
        [min]="minEndingDate" (dateInput)="checkingEndingDate()" [disabled]="endingDateDisabled" required>
        <mat-datepicker-toggle matSuffix [for]="endingPicker"></mat-datepicker-toggle>
        <mat-datepicker #endingPicker [disabled]="endingDateDisabled"></mat-datepicker>
      </mat-form-field>
      <mat-form-field class="date">
        <mat-select placeholder="ending hour" name="endingHour" [(ngModel)]="endingHour" (ngModelChange)="checkingEndingDate()" [disabled]="endingDateDisabled" required>
          <mat-option *ngFor="let hour of hourOptions" [value]="hour.value">
            {{ hour.viewValue }}
          </mat-option>
        </mat-select>
      </mat-form-field>
      <mat-form-field class="date">
        <mat-select placeholder="ending minute" name="endingMin" [(ngModel)]="endingMin" (ngModelChange)="checkingEndingDate()" [disabled]="endingDateDisabled" required>
          <mat-option *ngFor="let min of minOptions" [value]="min.value">
            {{ min.viewValue }}
          </mat-option>
        </mat-select>
      </mat-form-field>
      <!-- <mat-form-field>
        <input matInput [matTimepicker]="timePick" placeholder="Choose a time" formControlName="endingTime">
        <mat-timepicker-toggle matSuffix [for]="timePick"></mat-timepicker-toggle>
        <mat-timepicker #timePick color="primary"></mat-timepicker>
      </mat-form-field> -->

      <mat-form-field>
        <mat-select placeholder="Pick a color" name="color" [(ngModel)]="color" required>
          <mat-option *ngFor="let color of colorOptions" [value]="color.value" [ngStyle]="{'color': color.value}">
            {{ color.viewValue }}
          </mat-option>
        </mat-select>
      </mat-form-field>
      <div mat-dialog-actions>
        <button mat-raised-button (click)="onClose()">Cancel</button>
        <button mat-raised-button (click)="createEvent(f)" [disabled]="!f.valid">Submit</button>
      </div>
    </form>
  </div>
</div>

<ng-template #editEvents>
  <h1 mat-dialog-title><b>Events For {{ data.daySchedule.month + 1 }} / {{ data.daySchedule.day }} / {{ data.daySchedule.year }}</b></h1>
  <div mat-dialog-content>
    <div *ngFor="let event of events; let i = index">
      <form class="modal-container" #mf="ngForm">
        <h5>Event {{ i + 1 }}</h5>

        <mat-form-field class="full-width">
          <input matInput name="title" placeholder="Title" [(ngModel)]="event.title" required>
        </mat-form-field>
        <mat-form-field class="full-width">
          <textarea matInput name="description" placeholder="Description" [(ngModel)]="event.description"></textarea>
        </mat-form-field>

        <mat-form-field>
          <input matInput placeholder="Starting Date" [value]="event.startingTime" disabled>
        </mat-form-field>
        <mat-form-field>
          <input matInput placeholder="Ending Date" [value]="event.endingTime" disabled>
        </mat-form-field>

        <!-- <mat-form-field>
          <input matInput name="color" placeholder="Color" [(ngModel)]="event.color">
        </mat-form-field> -->

        <!-- <button mat-button (click)="onUpdate(mf)" [disabled]="!mf.valid">Update</button> -->
        <button mat-raised-button (click)="onRemove(event, i)">Remove</button>
      </form>
    </div>
  </div>
  <div mat-dialog-actions>
    <button mat-raised-button (click)="onClose()">Close</button>
  </div>
</ng-template>
